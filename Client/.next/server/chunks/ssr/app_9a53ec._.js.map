{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/auth/session.ts"],"sourcesContent":["'use server'\n\nimport { cookies } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL\n\nconst cookie = {\n    name: 'session',\n    options: {httpOnly: true, secure: true, sameSite: 'lax' as const, path:'/'},\n    duration: 1 * 60 * 60 * 1000, // 1hr \n}\n\nexport async function createSession(token : string){\n    const expires = new Date(Date.now() + cookie.duration);\n    //used after user login or signup \n    (await cookies()).set(cookie.name,token,{...cookie.options, expires})\n    \n    redirect('/dashboard')\n}\n\nexport async function verifySession() {\n    const token = (await cookies()).get(\"session\")?.value;\n  \n    try {\n      const response = await fetch(`${BACKEND_URL}/auth/verify-token`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        credentials: \"include\",\n      });\n  \n      if (!response.ok) {\n        return null; // ✅ Don't redirect — let middleware handle it\n      }\n  \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error(\"❌ verifySession error:\", error);\n      return null; // ✅ Just return null on failure\n    }\n  }\n\nexport async function deleteSession() {\n    (await cookies()).delete(cookie.name)\n    redirect('/login')\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;;AAAA;;;;;AAEA,MAAM;AAEN,MAAM,SAAS;IACX,MAAM;IACN,SAAS;QAAC,UAAU;QAAM,QAAQ;QAAM,UAAU;QAAgB,MAAK;IAAG;IAC1E,UAAU,IAAI,KAAK,KAAK;AAC5B;AAEO,eAAe,uCAAW,GAAX,cAAc,KAAc;IAC9C,MAAM,UAAU,IAAI,KAAK,KAAK,GAAG,KAAK,OAAO,QAAQ;IACrD,kCAAkC;IAClC,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,OAAO,IAAI,EAAC,OAAM;QAAC,GAAG,OAAO,OAAO;QAAE;IAAO;IAEnE,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACb;AAEO,eAAe,uCAAW,GAAX;IAClB,MAAM,QAAQ,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,YAAY;IAEhD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,kBAAkB,CAAC,EAAE;YAC/D,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;YAClC;YACA,aAAa;QACf;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,MAAM,8CAA8C;QAC7D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,IAAI;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,MAAM,gCAAgC;IAC/C;AACF;AAEK,eAAe,uCAAW,GAAX;IAClB,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,MAAM,CAAC,OAAO,IAAI;IACpC,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACb;;;IAnCsB;IAQA;IAwBA;;AAhCA,+OAAA;AAQA,+OAAA;AAwBA,+OAAA"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/auth/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { createSession, deleteSession } from './session';\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL\n\n const loginSchema = z.object({\n  email: z.string().email({message:\"Invalid email address\"}).trim(),\n  password: z.string().min(6, {message: \"Password must be at least 8 characters\"}).trim(),\n })\n\n const signUpSchema = z.object({\n  name: z.string().min(2, {message: \"Name must be at least 2 characters long.\"}).trim(),\n  email: z.string().email({message:\"Please enter a valid email\"}).trim(),\n  password: z.string().min(6, {message: \"Password must be at least 8 characters\"}).trim(),\n })\n\n//register user \n\n export async function signUp(prevState:any, formData: FormData){\n  //validate form fields\n  const result = signUpSchema.safeParse({\n    name: formData.get(\"name\"),\n    email: formData.get(\"email\"),\n    password: formData.get('password')\n  })\n\n  if(!result.success){\n    return {\n      errors: result.error.flatten().fieldErrors\n    }\n  }\n//create user \n  const {name,email,password} = result.data\n  let session : string; \n  try{\n    const response = await fetch(`${BACKEND_URL}/auth/register`,{\n      method:'POST',\n      credentials: 'include',\n      headers:{\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({name,email,password})\n    })\n    const data  = await response.json()\n    if(!response.ok){\n      return {\n        message: data.message\n      }\n    }\n    session = data.data.accessToken;\n  }catch(error){\n     return {\n      message: (error as Error).message\n      }\n    }\n//create session \n  await createSession(session)\n\n }\n\n// sign in user\n\n export async function logIn(prevState:any, formData: FormData) {\n  //validate form fields\n  const result = loginSchema.safeParse({\n    email: formData.get(\"email\"),\n    password: formData.get('password')\n  })\n\n  if(!result.success){\n    return {\n      errors: result.error.flatten().fieldErrors\n    }\n  }\n//login user  \n  const {email,password} = result.data\n  let session : string; \n  try{\n    const response = await fetch(`${BACKEND_URL}/auth/login`,{\n      method:'POST',\n      credentials: 'include',\n      headers:{\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email,password})\n    })\n    const data  = await response.json()\n    if(!response.ok){\n      return {\n        message: data.message\n      }\n    }\n    session = data.data.accessToken;\n  }catch(error){\n     return {\n        message: (error as Error).message\n      }\n    }\n//create session \n  await createSession(session)\n }\n\n//Sign out user \nexport async function logOut() {\n await deleteSession();\n}\n\n export async function UploadImage(prevState:String | undefined, formData: FormData) {\n  return undefined;\n }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/dashboard/nav-links.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/dashboard/nav-links.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/dashboard/nav-links.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA"}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/dashboard/nav-links.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/dashboard/nav-links.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/dashboard/nav-links.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/dashboard/sidenav.tsx"],"sourcesContent":["import { logOut } from \"@/app/auth/actions\";\nimport NavLinks from \"@/app/componets/dashboard/nav-links\";\nimport { PowerIcon } from \"@heroicons/react/24/outline\";\n\nexport default function SideNav() {\n  return (\n    <div className=\"bg-white text-logo w-80 fixed top-16 left-0 h-full py-7 px-2 space-y-10 z-10 md:w-80 md:sticky\">\n      <div className=\"md:px-7 pt-3 space-y-5\">\n        <NavLinks />\n        <div className=\"hidden h-auto w-full grow rounded-md bg-gray-50 md:block\"></div>\n        <div className=\"py-2.5 px-4 hover:bg-primary rounded-xl\">\n        <form action={logOut}>\n            <button className=\"flex items-center space-x-3 text-gray-800 hover:text-blue-600 transition\">\n              <PowerIcon className=\"w-8\" />\n              <div className=\"hidden md:block text-[18px]\">Sign Out</div>\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8IAAA,CAAA,UAAQ;;;;;8BACT,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;8BACf,cAAA,8OAAC;wBAAK,QAAQ,sHAAA,CAAA,SAAM;kCAChB,cAAA,8OAAC;4BAAO,WAAU;;8CAChB,8OAAC,iNAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;oCAAI,WAAU;8CAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO3D"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/dashboard/topnav.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/dashboard/topnav.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/dashboard/topnav.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA"}},
    {"offset": {"line": 354, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/dashboard/topnav.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/dashboard/topnav.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/dashboard/topnav.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 384, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/JotformChatbot.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/JotformChatbot.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/JotformChatbot.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAoS,GACjU,kEACA"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/JotformChatbot.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/JotformChatbot.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/JotformChatbot.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgR,GAC7S,8CACA"}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/dashboard/layout.tsx"],"sourcesContent":["import SideNav from \"@/app/componets/dashboard/sidenav\";\nimport TopNav from \"../componets/dashboard/topnav\";\nimport { verifySession } from \"../auth/session\";\nimport Email from \"next-auth/providers/email\";\nimport JotformChatbot from \"@/app/componets/JotformChatbot\";\n\nexport default async function Layout({ children }: { children: React.ReactNode }) {\n    const session = await verifySession();\n    console.log(session.profilePic);\n    \n    \n    return (\n        <div>\n            <TopNav name={session.name} email={session.email} profilePic={session.profilePic}/>\n            <div className=\"flex flex-col md:flex-row min-h-screen md:flex-row\">\n                <SideNav />\n                <div className=\"p-2 md:p-10 text-2xl font-bold flex-1\">\n                    {children}\n                    <JotformChatbot />\n                </div>\n            </div>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAEA;;;;;;AAEe,eAAe,OAAO,EAAE,QAAQ,EAAiC;IAC5E,MAAM,UAAU,MAAM,CAAA,GAAA,sHAAA,CAAA,gBAAa,AAAD;IAClC,QAAQ,GAAG,CAAC,QAAQ,UAAU;IAG9B,qBACI,8OAAC;;0BACG,8OAAC,wIAAA,CAAA,UAAM;gBAAC,MAAM,QAAQ,IAAI;gBAAE,OAAO,QAAQ,KAAK;gBAAE,YAAY,QAAQ,UAAU;;;;;;0BAChF,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,yIAAA,CAAA,UAAO;;;;;kCACR,8OAAC;wBAAI,WAAU;;4BACV;0CACD,8OAAC,mIAAA,CAAA,UAAc;;;;;;;;;;;;;;;;;;;;;;;AAKnC"}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}