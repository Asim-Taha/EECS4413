{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/login-form.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/login-form.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/login-form.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgS,GAC7T,8DACA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/componets/login-form.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/componets/login-form.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/componets/login-form.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4Q,GACzS,0CACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/login/page.tsx"],"sourcesContent":["import LoginForm from \"../componets/login-form\";\n\nexport default function LoginPage(){\n    return (\n        <main className=\"flex items-center justify-center md:h-screen\">\n          <div className=\"relative mx-auto flex w-full max-w-[400px] flex-col space-y-2.5 p-4 md:-mt-32\">\n            <div className=\"flex h-20 w-full items-end rounded-lg bg-blue-500 p-3 md:h-36\">\n              <div className=\"w-32 text-white md:w-36\">\n              </div>\n            </div>\n              <LoginForm />\n          </div>\n        </main>\n      );\n}"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACpB,qBACI,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;;;;;;;;;;8BAGf,8OAAC,kIAAA,CAAA,UAAS;;;;;;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/auth/session.ts"],"sourcesContent":["'use server'\n\nimport { cookies } from \"next/headers\";\nimport { redirect } from \"next/navigation\";\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL\n\nconst cookie = {\n    name: 'session',\n    options: {httpOnly: true, secure: true, sameSite: 'lax' as const, path:'/'},\n    duration: 1 * 60 * 60 * 1000, // 1hr \n}\n\nexport async function createSession(token : string){\n    const expires = new Date(Date.now() + cookie.duration);\n    //used after user login or signup \n    (await cookies()).set(cookie.name,token,{...cookie.options, expires})\n    \n    redirect('/dashboard')\n}\n\nexport async function verifySession() {\n    const token = (await cookies()).get(\"session\")?.value;\n  \n    try {\n      const response = await fetch(`${BACKEND_URL}/auth/verify-token`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        credentials: \"include\",\n      });\n  \n      if (!response.ok) {\n        return null; // ✅ Don't redirect — let middleware handle it\n      }\n  \n      const data = await response.json();\n      return data.user;\n    } catch (error) {\n      console.error(\"❌ verifySession error:\", error);\n      return null; // ✅ Just return null on failure\n    }\n  }\n\nexport async function deleteSession() {\n    (await cookies()).delete(cookie.name)\n    redirect('/login')\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;;AAAA;;;;;AAEA,MAAM;AAEN,MAAM,SAAS;IACX,MAAM;IACN,SAAS;QAAC,UAAU;QAAM,QAAQ;QAAM,UAAU;QAAgB,MAAK;IAAG;IAC1E,UAAU,IAAI,KAAK,KAAK;AAC5B;AAEO,eAAe,uCAAW,GAAX,cAAc,KAAc;IAC9C,MAAM,UAAU,IAAI,KAAK,KAAK,GAAG,KAAK,OAAO,QAAQ;IACrD,kCAAkC;IAClC,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,OAAO,IAAI,EAAC,OAAM;QAAC,GAAG,OAAO,OAAO;QAAE;IAAO;IAEnE,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACb;AAEO,eAAe,uCAAW,GAAX;IAClB,MAAM,QAAQ,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,GAAG,CAAC,YAAY;IAEhD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,kBAAkB,CAAC,EAAE;YAC/D,QAAQ;YACR,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;YAClC;YACA,aAAa;QACf;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,MAAM,8CAA8C;QAC7D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,IAAI;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,MAAM,gCAAgC;IAC/C;AACF;AAEK,eAAe,uCAAW,GAAX;IAClB,CAAC,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,GAAG,EAAE,MAAM,CAAC,OAAO,IAAI;IACpC,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACb;;;IAnCsB;IAQA;IAwBA;;AAhCA,+OAAA;AAQA,+OAAA;AAwBA,+OAAA"}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///Users/hulyayasar/Desktop/EECS4413-main/Client/app/auth/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { createSession, deleteSession } from './session';\n\nconst BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL\n\n const loginSchema = z.object({\n  email: z.string().email({message:\"Invalid email address\"}).trim(),\n  password: z.string().min(6, {message: \"Password must be at least 8 characters\"}).trim(),\n })\n\n const signUpSchema = z.object({\n  name: z.string().min(2, {message: \"Name must be at least 2 characters long.\"}).trim(),\n  email: z.string().email({message:\"Please enter a valid email\"}).trim(),\n  password: z.string().min(6, {message: \"Password must be at least 8 characters\"}).trim(),\n })\n\n//register user \n\n export async function signUp(prevState:any, formData: FormData){\n  //validate form fields\n  const result = signUpSchema.safeParse({\n    name: formData.get(\"name\"),\n    email: formData.get(\"email\"),\n    password: formData.get('password')\n  })\n\n  if(!result.success){\n    return {\n      errors: result.error.flatten().fieldErrors\n    }\n  }\n//create user \n  const {name,email,password} = result.data\n  let session : string; \n  try{\n    const response = await fetch(`${BACKEND_URL}/auth/register`,{\n      method:'POST',\n      credentials: 'include',\n      headers:{\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({name,email,password})\n    })\n    const data  = await response.json()\n    if(!response.ok){\n      return {\n        message: data.message\n      }\n    }\n    session = data.data.accessToken;\n  }catch(error){\n     return {\n      message: (error as Error).message\n      }\n    }\n//create session \n  await createSession(session)\n\n }\n\n// sign in user\n\n export async function logIn(prevState:any, formData: FormData) {\n  //validate form fields\n  const result = loginSchema.safeParse({\n    email: formData.get(\"email\"),\n    password: formData.get('password')\n  })\n\n  if(!result.success){\n    return {\n      errors: result.error.flatten().fieldErrors\n    }\n  }\n//login user  \n  const {email,password} = result.data\n  let session : string; \n  try{\n    const response = await fetch(`${BACKEND_URL}/auth/login`,{\n      method:'POST',\n      credentials: 'include',\n      headers:{\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email,password})\n    })\n    const data  = await response.json()\n    if(!response.ok){\n      return {\n        message: data.message\n      }\n    }\n    session = data.data.accessToken;\n  }catch(error){\n     return {\n        message: (error as Error).message\n      }\n    }\n//create session \n  await createSession(session)\n }\n\n//Sign out user \nexport async function logOut() {\n await deleteSession();\n}\n\n export async function UploadImage(prevState:String | undefined, formData: FormData) {\n  return undefined;\n }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}